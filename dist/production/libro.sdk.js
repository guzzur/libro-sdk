(()=>{var U=Object.defineProperty;var K=(o,e)=>{for(var n in e)U(o,n,{get:e[n],enumerable:!0})};function R(){return document.getElementsByTagName("head")[0]}function g(){return document.getElementsByTagName("body")[0]}function T(){document.open(),document.close()}function x(o){let{url:e,parentElement:n}=o,t=document.createElement("link");t.rel="stylesheet",t.href=e,n.appendChild(t)}function l(o){let{url:e,parentElement:n,classNames:t}=o,r=document.createElement("iframe");r.classList.add(...t),r.src=e,n.appendChild(r)}function _(){location.reload()}var A="strigo.io",B="https://libro-demo.web.app/assets/css/strigo.css",N=["strigo-exercises"],w=["orig-iframe"];function v(o){let e={};for(let[n,t]of o)e[n]=t;return e}function G(){let{host:o,pathname:e,href:n,origin:t,search:r}=window.location;return{host:o,pathName:e,href:n,origin:t,search:r,params:H(r)}}function H(o){let n=new URLSearchParams(o).entries();return v(n)}function h(o){let{subDomain:e,token:n,webApiKey:t}=o;return`https://${e}.${A}/libro?token=${n.token}&webApiKey=${t}`}function s(o,e){try{return JSON.parse(window[o].getItem(e))}catch(n){return console.log(n),null}}function S(o,e,n){try{return window[o].setItem(e,JSON.stringify(n)),n}catch(t){return console.log(t),null}}function p(o,e,n,t){try{let r=s(o,e);if(!r)throw new Error("Can't find initial state");let i={...r,[n]:t};return window[o].setItem(e,JSON.stringify(i)),i}catch(r){return console.log(r),null}}function a(o,e){try{window[o].removeItem(e)}catch(n){console.log(n)}}function y(){return s("localStorage","libroConfig")}function P(o){return S("localStorage","libroConfig",o)}function c(){return s("localStorage","libroConfig")}function D(){a("localStorage","libroConfig")}var O={};K(O,{clearSession:()=>L,getSession:()=>M,init:()=>f,isPanelOpen:()=>m,setSessionValue:()=>W,setup:()=>u});function f(){let o=s("sessionStorage","libroSession");return o}function u(o){return S("sessionStorage","libroSession",o)}function m(){return M()?.isPanelOpen}function M(){return s("sessionStorage","libroSession")}function W(o,e){return p("sessionStorage","libroSession",o,e)}function L(){a("sessionStorage","libroSession")}window.onunload=function(){a("sessionStorage","libroSession")};var E;(i=>{function e(){y(),f(),O&&m()?i.SDKType="SUBSCRIBER":i.SDKType="HOST",console.log("init called")}i.init=e;function n(F){if(i.SDKType==="SUBSCRIBER")return;console.log("setup started");let{email:d,token:I,webApiKey:C,subDomain:b}=F;if(!d||!I||!C||!b){console.log("Please provide setup data");return}P({email:d,initSite:G(),token:I,webApiKey:C,subDomain:b}),T(),x({parentElement:R(),url:B}),l({parentElement:g(),url:h(c()),classNames:N}),l({parentElement:g(),url:c().initSite.href,classNames:w}),u({currentUrl:c().initSite.href,isPanelOpen:!0}),console.log("setup finished")}i.setup=n;function t(){i.SDKType==="SUBSCRIBER"&&(D(),L(),_()),console.log("shutdown called")}i.shutdown=t;function r(){console.log("sendEvent called")}i.sendEvent=r})(E||={});window.LibroSDK=E;window.LibroSDK.init();})();
